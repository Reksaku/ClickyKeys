<Window
    x:Class="ClickyKeys.Settings"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:local="clr-namespace:ClickyKeys"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
    xmlns:controls="clr-namespace:ClickyKeys.Controls"
    mc:Ignorable="d"
    Closing="Window_Closed"
    Title="Settings" 
    Height="865" MinHeight="240" MaxHeight="1040"
    Width="440" MinWidth="440" MaxWidth="440"
    Icon="/Resources/Icon.ico">

    <Window.Resources>
        <Style x:Key="PlaceholderTextBox" TargetType="TextBox">
            <Setter Property="Padding" Value="4,2,4,2"/>

            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Grid>
                            <!-- Text -->
                            <ScrollViewer x:Name="PART_ContentHost"
                                  Margin="{TemplateBinding Padding}"
                                  VerticalAlignment="Center"/>

                            <!-- Placeholder -->
                            <TextBlock x:Name="Placeholder"
                               Text="{TemplateBinding Tag}"
                               Margin="{TemplateBinding Padding}"
                               Foreground="Gray"
                               VerticalAlignment="Center"
                               IsHitTestVisible="False"
                               Visibility="Collapsed"/>
                        </Grid>

                        <ControlTemplate.Triggers>
                            <!-- Placeholder visibility -->
                            <Trigger Property="Text" Value="">
                                <Setter TargetName="Placeholder"
                                Property="Visibility"
                                Value="Visible" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </Window.Resources>



    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="42"/>
            <RowDefinition Height="33"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="50"/>
        </Grid.RowDefinitions>


        <Label x:Name="SettingsLabel" Content="Settings" HorizontalAlignment="Center" VerticalAlignment="Top" FontFamily="Futura Bk BT" FontSize="28" Grid.Row="0"/>
        <Label x:Name="ProfilesLabel" Content="Profile:" HorizontalAlignment="Center" VerticalAlignment="Top" FontFamily="Futura Bk BT" FontSize="20" Grid.Row="1"/>
        <ScrollViewer Grid.Row="2">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <StackPanel x:Name="GridSizeScetion" Grid.Row="0">

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="20"/>
                        </Grid.RowDefinitions>

                        <Label Content="Grid rows" HorizontalAlignment="Center" Margin="30,0,30,0" VerticalAlignment="Center" Grid.Row="0" Grid.Column="0" FontFamily="Futura Bk BT" FontSize="18" x:Name="RowsLabel"/>
                        <materialDesign:DecimalUpDown HorizontalAlignment="Left" VerticalAlignment="Center" Margin="20,0,0,0" Width="100" Grid.Row="0" Grid.Column="1" Minimum="1" Maximum="10" FontSize="16" x:Name="RowsCount"/>
                        <Button Content="Set" HorizontalAlignment="Left" Margin="140,0,0,0"  VerticalAlignment="Center" Grid.Row="0" Grid.Column="1" Click="Click_GridRows"/>
                    </Grid>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="20"/>
                        </Grid.RowDefinitions>
                        <Label Content="Grid columns" HorizontalAlignment="Center" Margin="30,0,30,0" VerticalAlignment="Center" Grid.Row="0" Grid.Column="0" FontFamily="Futura Bk BT" FontSize="18" x:Name="ColumnsLabel"/>
                        <materialDesign:DecimalUpDown HorizontalAlignment="Left" VerticalAlignment="Center" Margin="20,0,0,0" Width="100" Grid.Row="0" Grid.Column="1" Minimum="1" Maximum="10" FontSize="16" x:Name="ColumnsCount"/>
                        <Button Content="Set" HorizontalAlignment="Left" Margin="140,0,0,0"  VerticalAlignment="Center" Grid.Row="0" Grid.Column="1" Click="Click_GridColumns"/>
                    </Grid>
                </StackPanel>

                <StackPanel x:Name="ColorsSection" Grid.Row="1">

                    <Label Content="Colors" HorizontalAlignment="Center" VerticalAlignment="Top" FontFamily="Futura Bk BT" FontSize="16" Grid.Row="0"/>

                    <Grid x:Name="BackgroundGrid">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="20"/>
                        </Grid.RowDefinitions>

                        <Label Content="Background color" HorizontalAlignment="Center" Margin="30,0,30,0" VerticalAlignment="Center" Grid.Row="0" Grid.Column="0" Grid.RowSpan="2" FontFamily="Futura Bk BT" FontSize="18"/>
                        <CheckBox x:Name="BackgroundPalletCheckBox" Content="Expand pallet" HorizontalAlignment="Center" Margin="0,0,0,-5" VerticalAlignment="Top" Width="100" Grid.Row="0" Grid.Column="1"/>
                        <materialDesign:ColorPicker x:Name="BackgroundColorPicker"
     HorizontalAlignment="Center" VerticalAlignment="Center"
     Width="200" Grid.Row="1" Grid.Column="1">
                            <materialDesign:ColorPicker.Style>
                                <Style TargetType="materialDesign:ColorPicker">

                                    <Setter Property="Height" Value="36" />

                                    <Style.Triggers>
                                        <DataTrigger Value="True">
                                            <DataTrigger.Binding>
                                                <Binding Path="IsChecked"
             Source="{x:Reference BackgroundPalletCheckBox}" />
                                            </DataTrigger.Binding>


                                            <DataTrigger.EnterActions>
                                                <BeginStoryboard x:Name="ExpandHeightStoryboard" HandoffBehavior="SnapshotAndReplace">
                                                    <Storyboard>
                                                        <DoubleAnimation
                         Storyboard.TargetProperty="Height"
                         To="80"
                         Duration="0:0:0.20">
                                                            <DoubleAnimation.EasingFunction>
                                                                <QuadraticEase EasingMode="EaseOut"/>
                                                            </DoubleAnimation.EasingFunction>
                                                        </DoubleAnimation>
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </DataTrigger.EnterActions>


                                            <DataTrigger.ExitActions>
                                                <BeginStoryboard x:Name="CollapseHeightStoryboard" HandoffBehavior="SnapshotAndReplace">
                                                    <Storyboard>
                                                        <DoubleAnimation
                         Storyboard.TargetProperty="Height"
                         To="36"
                         Duration="0:0:0.20">
                                                            <DoubleAnimation.EasingFunction>
                                                                <QuadraticEase EasingMode="EaseIn"/>
                                                            </DoubleAnimation.EasingFunction>
                                                        </DoubleAnimation>
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </DataTrigger.ExitActions>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </materialDesign:ColorPicker.Style>
                        </materialDesign:ColorPicker>
                    </Grid>

                    <Grid x:Name="PanelsdGrid">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="20"/>
                        </Grid.RowDefinitions>
                        <Label Content="Panels color" HorizontalAlignment="Center" Margin="30,0,30,0" VerticalAlignment="Center" Grid.Row="0" Grid.Column="0" Grid.RowSpan="2" FontFamily="Futura Bk BT" FontSize="18"/>
                        <CheckBox x:Name="PanelsPalletCheckBox" Content="Expand pallet" HorizontalAlignment="Center" Margin="0,0,0,-5" VerticalAlignment="Top" Width="100" Grid.Row="0" Grid.Column="1"/>
                        <materialDesign:ColorPicker x:Name="PanelsColorPicker"
    HorizontalAlignment="Center" VerticalAlignment="Center"
    Width="200" Grid.Row="1" Grid.Column="1">
                            <materialDesign:ColorPicker.Style>
                                <Style TargetType="materialDesign:ColorPicker">

                                    <Setter Property="Height" Value="36" />

                                    <Style.Triggers>
                                        <DataTrigger Value="True">
                                            <DataTrigger.Binding>
                                                <Binding Path="IsChecked"
            Source="{x:Reference PanelsPalletCheckBox}" />
                                            </DataTrigger.Binding>


                                            <DataTrigger.EnterActions>
                                                <BeginStoryboard x:Name="ExpandHeightStoryboard" HandoffBehavior="SnapshotAndReplace">
                                                    <Storyboard>
                                                        <DoubleAnimation
                        Storyboard.TargetProperty="Height"
                        To="80"
                        Duration="0:0:0.20">
                                                            <DoubleAnimation.EasingFunction>
                                                                <QuadraticEase EasingMode="EaseOut"/>
                                                            </DoubleAnimation.EasingFunction>
                                                        </DoubleAnimation>
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </DataTrigger.EnterActions>


                                            <DataTrigger.ExitActions>
                                                <BeginStoryboard x:Name="CollapseHeightStoryboard" HandoffBehavior="SnapshotAndReplace">
                                                    <Storyboard>
                                                        <DoubleAnimation
                        Storyboard.TargetProperty="Height"
                        To="36"
                        Duration="0:0:0.20">
                                                            <DoubleAnimation.EasingFunction>
                                                                <QuadraticEase EasingMode="EaseIn"/>
                                                            </DoubleAnimation.EasingFunction>
                                                        </DoubleAnimation>
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </DataTrigger.ExitActions>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </materialDesign:ColorPicker.Style>
                        </materialDesign:ColorPicker>
                    </Grid>

                    <Grid x:Name="KeysdGrid">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="20"/>
                        </Grid.RowDefinitions>

                        <Label Content="Keys text color" HorizontalAlignment="Center" Margin="30,0,30,0" VerticalAlignment="Center" Grid.Row="0" Grid.Column="0" Grid.RowSpan="2" FontFamily="Futura Bk BT" FontSize="18"/>
                        <CheckBox x:Name="KeyssPalletCheckBox" Content="Expand pallet" HorizontalAlignment="Center" Margin="0,0,0,-5" VerticalAlignment="Top" Width="100" Grid.Row="0" Grid.Column="1"/>
                        <materialDesign:ColorPicker x:Name="KeysColorPicker"
    HorizontalAlignment="Center" VerticalAlignment="Center"
    Width="200" Grid.Row="1" Grid.Column="1">
                            <materialDesign:ColorPicker.Style>
                                <Style TargetType="materialDesign:ColorPicker">

                                    <Setter Property="Height" Value="36" />

                                    <Style.Triggers>
                                        <DataTrigger Value="True">
                                            <DataTrigger.Binding>
                                                <Binding Path="IsChecked"
                                    Source="{x:Reference KeyssPalletCheckBox}" />
                                            </DataTrigger.Binding>


                                            <DataTrigger.EnterActions>
                                                <BeginStoryboard x:Name="ExpandHeightStoryboard" HandoffBehavior="SnapshotAndReplace">
                                                    <Storyboard>
                                                        <DoubleAnimation
                                            Storyboard.TargetProperty="Height"
                                            To="80"
                                            Duration="0:0:0.20">
                                                            <DoubleAnimation.EasingFunction>
                                                                <QuadraticEase EasingMode="EaseOut"/>
                                                            </DoubleAnimation.EasingFunction>
                                                        </DoubleAnimation>
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </DataTrigger.EnterActions>


                                            <DataTrigger.ExitActions>
                                                <BeginStoryboard x:Name="CollapseHeightStoryboard" HandoffBehavior="SnapshotAndReplace">
                                                    <Storyboard>
                                                        <DoubleAnimation
                                            Storyboard.TargetProperty="Height"
                                            To="36"
                                            Duration="0:0:0.20">
                                                            <DoubleAnimation.EasingFunction>
                                                                <QuadraticEase EasingMode="EaseIn"/>
                                                            </DoubleAnimation.EasingFunction>
                                                        </DoubleAnimation>
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </DataTrigger.ExitActions>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </materialDesign:ColorPicker.Style>
                        </materialDesign:ColorPicker>
                    </Grid>

                    <Grid x:Name="ValuesdGrid">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="20"/>
                        </Grid.RowDefinitions>
                        <Label Content="Values text color" HorizontalAlignment="Center" Margin="30,0,30,0" VerticalAlignment="Center" Grid.Row="0" Grid.Column="0" Grid.RowSpan="2" FontFamily="Futura Bk BT" FontSize="18"/>
                        <CheckBox x:Name="ValuessPalletCheckBox" Content="Expand pallet" HorizontalAlignment="Center" Margin="0,0,0,-5" VerticalAlignment="Top" Width="100" Grid.Row="0" Grid.Column="1"/>
                        <materialDesign:ColorPicker x:Name="ValuesColorPicker"
HorizontalAlignment="Center" VerticalAlignment="Center"
Width="200" Grid.Row="1" Grid.Column="1">
                            <materialDesign:ColorPicker.Style>
                                <Style TargetType="materialDesign:ColorPicker">

                                    <Setter Property="Height" Value="36" />

                                    <Style.Triggers>
                                        <DataTrigger Value="True">
                                            <DataTrigger.Binding>
                                                <Binding Path="IsChecked"
                                Source="{x:Reference ValuessPalletCheckBox}" />
                                            </DataTrigger.Binding>


                                            <DataTrigger.EnterActions>
                                                <BeginStoryboard x:Name="ExpandHeightStoryboard" HandoffBehavior="SnapshotAndReplace">
                                                    <Storyboard>
                                                        <DoubleAnimation
                                        Storyboard.TargetProperty="Height"
                                        To="80"
                                        Duration="0:0:0.20">
                                                            <DoubleAnimation.EasingFunction>
                                                                <QuadraticEase EasingMode="EaseOut"/>
                                                            </DoubleAnimation.EasingFunction>
                                                        </DoubleAnimation>
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </DataTrigger.EnterActions>


                                            <DataTrigger.ExitActions>
                                                <BeginStoryboard x:Name="CollapseHeightStoryboard" HandoffBehavior="SnapshotAndReplace">
                                                    <Storyboard>
                                                        <DoubleAnimation
                                        Storyboard.TargetProperty="Height"
                                        To="36"
                                        Duration="0:0:0.20">
                                                            <DoubleAnimation.EasingFunction>
                                                                <QuadraticEase EasingMode="EaseIn"/>
                                                            </DoubleAnimation.EasingFunction>
                                                        </DoubleAnimation>
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </DataTrigger.ExitActions>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </materialDesign:ColorPicker.Style>
                        </materialDesign:ColorPicker>
                    </Grid>

                </StackPanel>

                <StackPanel x:Name="FontsSection" Grid.Row="2">

                    <Grid x:Name="KeysFontGrid">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="20"/>
                        </Grid.RowDefinitions>
                        <Label Content="Keys font" HorizontalAlignment="Center" VerticalAlignment="Top" FontFamily="Futura Bk BT" FontSize="16" Grid.Row="0"/>
                        <controls:FontPicker Grid.Row="1" x:Name="KeysFontPicker"/>
                    </Grid>

                    <Grid x:Name="ValuesFontGrid">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="20"/>
                        </Grid.RowDefinitions>

                        <Label Content="Values font" HorizontalAlignment="Center" VerticalAlignment="Top" FontFamily="Futura Bk BT" FontSize="16" Grid.Row="0"/>
                        <controls:FontPicker Grid.Row="1" x:Name="ValuesFontPicker"/>
                    </Grid>

                </StackPanel>

                <StackPanel x:Name="RainbowSection" Grid.Row="3">
                    <Label Content="Rainbow background" HorizontalAlignment="Center" VerticalAlignment="Top" FontFamily="Futura Bk BT" FontSize="16" Grid.Row="0"/>

                    <Label Content="You may change saturation via background color pallet" HorizontalAlignment="Center" VerticalAlignment="Top" FontFamily="Futura Bk BT" FontSize="10"/>

                    <CheckBox x:Name="BackgroundRainbowCheckBox" Click="Click_BackgroundRainbowCheckBox" Content="Rainbow background mode" HorizontalAlignment="Center" Margin="0,0,0,0" VerticalAlignment="Top"/>
                    
                </StackPanel>

            </Grid>
        </ScrollViewer>

        <Grid VerticalAlignment="Bottom" Grid.Row="3">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="120"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <Button Content="Load" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="10,10,10,10" Grid.Column="0" Click="Click_Load"/>
            <TextBox x:Name="NewFileNameTextBox" Style="{StaticResource PlaceholderTextBox}" Tag="New settings" Text="" Margin="0,10,5,10" Visibility="Hidden" Grid.Column="1" Grid.ColumnSpan="2"/>
            <Button x:Name="SaveAsButton" Content="Save As" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="0,10,10,10" Grid.Column="2" Click="Click_SaveAs"/>
            <Button Content="Save" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="0,10,10,10" Grid.Column="3" Click="Click_SaveAndClose"/>
            <Button Content="Exit" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="0,0,10,10" Grid.Column="4" Click="Click_Close"/>

        </Grid>


    </Grid>

</Window>